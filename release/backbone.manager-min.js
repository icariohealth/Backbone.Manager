!function(t,e,r,n){var a,i,o,s,l,u;s=e.extend({},t.Events),l=n.location.href,i=/[:*]([^:)/]+)/g,o=/([^/]+)/g,a=function(){function r(r,n){this.router=r,e.extend(this,t.Events),this._parseStates(),this._parseEvents(),this.initialize(n)}return r.prototype.states={},r.prototype.events={},r.prototype.initialize=function(){},r.prototype._parseStates=function(){e.each(e.keys(this.states),function(t){return function(r){var n,a;if(a=t.states[r],!a.transitionMethod)throw new Error(r+" needs transitionMethod definitions");if(a.url){if(e.isRegExp(a.url))throw new Error(r+" is not allowed to have a RegExp url");a._urlParams=function(){var t;for(t=[];n=i.exec(a.url);)t.push(n[1]);return t}(),a._urlAsTemplate=e.template(a.url,null,{interpolate:i}),a._urlAsRegex=t.router._routeToRegExp(a.url),t.router.route(a._urlAsRegex,r,function(){t._routeCallbackChooser(r,a,Array.apply(null,arguments))})}return t.listenTo(s,r,function(e){t._handleTransitionCallback(r,a,e)})}}(this))},r.prototype._routeCallbackChooser=function(t,e,r){var n;l&&this._getWindowHref()===l?this._handleLoadCallback(t,e,r):this._handleTransitionCallback(t,e,r,n=!0),l=null},r.prototype._handleLoadCallback=function(t,e,r){e.loadMethod&&(this.trigger("pre-load"),this.trigger("pre-load:"+t,r),this[e.loadMethod].apply(this,r),this.trigger("post-load:"+t,r),this.trigger("post-load"))},r.prototype._handleTransitionCallback=function(t,r,n,a){var i,o,s,l;if(null==a&&(a=!1),this.trigger("pre-transition"),this.trigger("pre-transition:"+t),r.url){if(n instanceof Array)i=e.object(r._urlParams,n),l=r._urlAsTemplate(i),a||this.router.navigate(l),o=e.map(e.initial(n),String),o.push(e.last(n));else{if(!(n instanceof Object))throw new Error("Args are only supported as an object or array if state.url is defined");l=r._urlAsTemplate(n),a||this.router.navigate(l),o=this.router._extractParameters(r._urlAsRegex,l)}s={url:l},o.push(s)}else o=n;this[r.transitionMethod].apply(this,o),this.trigger("post-transition:"+t),this.trigger("post-transition")},r.prototype._parseEvents=function(){e.each(e.keys(this.events),function(t){return function(e){t.on(e,t[t.events[e]])}}(this))},r.prototype._getWindowHref=function(){return null!=n?n.location.href:void 0},r.go=function(t,e){return s.trigger(t,e)},r.extend=t.Model.extend,r.config={urlToStateParser:function(t){var r,n,a;return a={state:"",args:[]},n=function(){var e;for(e=[];r=o.exec(t);)e.push(r[1]);return e}(),e.each(n,function(t,e){return e%2?(a.args.push(n[e]),a.state+="detail"):a.state+=n[e],e!==n.length-1?a.state+=".":void 0}),a}},r}(),t.Manager=a,u=function(e){var n,a,i,o,l,u;e.isDefaultPrevented()||(o=r(e.target).attr("data-bb-state"),e.preventDefault(),""===o?(u=document.createElement("a"),u.href=e.target.href,a=t.Manager.config.urlToStateParser(u.pathname),s._events[a.state]?(i=a.state,n=a.args,n.push(u.search)):(i="*",n=[u.pathname])):(l=o.split("(",2),i=l[0],n=JSON.parse(l[1].slice(0,l[1].indexOf(")"))),n instanceof Array&&n.push(null)),s.trigger(i,n))},r(n.document).on("click","a[data-bb-state]",function(t){return u(t)})}(Backbone,_,$,window);
//# sourceMappingURL=backbone.manager-min.js.map